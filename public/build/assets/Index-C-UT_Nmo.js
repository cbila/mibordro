import{T as j}from"./index-wVxUC5AF.js";import{r as B,a as V,w as I,W as D,c,b as r,u as p,d as h,F as g,o as i,g as P,e as s,p as m,v as w,k,t as n,f as N,q as U,i as v}from"./app-Clor6Bmc.js";import{_ as T}from"./AuthenticatedLayout-BML9ltml.js";import{_ as F}from"./Breadcrumb-CpD5UrIt.js";import{_ as W}from"./TextInput-Dx03gvMx.js";import{_ as q,r as x,a as A}from"./InfoButton-Cd8gAiIv.js";import{_ as E}from"./SelectInput-CxnOG9h6.js";import{D as $}from"./DangerButton-Cz5zDBKP.js";import{p as G}from"./lodash-DA_3EDCo.js";import{_ as L}from"./Pagination-Bjae9DjC.js";import M from"./Create-CwoWcX4y.js";import z from"./Edit-Didx4kyY.js";import H from"./Delete-DsGnyZCK.js";import J from"./DeleteBulk-DxJem60I.js";import{_ as K}from"./Checkbox-ClyhlXgW.js";import Q from"./Permission-Byx3PSt6.js";import{r as y}from"./ChevronUpDownIcon-DijZITOm.js";import{r as R}from"./PencilIcon-DQacpF4j.js";import"./index-Zi_8adpu.js";import"./index-IWnyXDg_.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Toast-C3zIoRlW.js";import"./open-closed-BZIuLmqF.js";import"./InputLabel-B8YExcbU.js";import"./Modal--UPmvu_-.js";import"./PrimaryButton-DOVT375j.js";import"./SecondaryButton-CVrCLH69.js";const X={class:"space-y-4"},Y={class:"flex justify-between mb-6"},Z={class:"px-4 sm:px-0"},ee={class:"rounded-lg overflow-hidden w-fit"},se={class:"relative bg-white dark:bg-slate-800 shadow sm:rounded-lg"},te={class:"flex justify-between p-2"},le={class:"flex space-x-2"},oe={class:"overflow-x-auto scrollbar-table"},re={class:"w-full"},ae={class:"uppercase text-sm border-t border-slate-200 dark:border-slate-700"},ne={class:"dark:bg-slate-900/50 text-left"},ie={class:"px-2 py-4 text-center"},pe={class:"flex justify-between items-center"},de={class:"flex justify-between items-center"},me={class:"px-2 py-4"},ce={class:"flex justify-between items-center"},ue={class:"flex justify-between items-center"},fe={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},be=["value"],he={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},we={class:"whitespace-nowrap py-4 px-2 sm:py-3"},ye={class:"whitespace-nowrap py-4 px-2 sm:py-3"},ke=["onClick"],_e=["onClick"],ge={key:2,class:"whitespace-nowrap py-4 px-2 sm:py-3"},ve={class:"whitespace-nowrap py-4 px-2 sm:py-3"},xe={class:"whitespace-nowrap py-4 px-2 sm:py-3"},$e={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Oe={class:"flex justify-center items-center"},Ce={class:"rounded-md overflow-hidden"},Se={class:"flex justify-between items-center p-2 border-t border-slate-200 dark:border-slate-700"},ss={__name:"Index",props:{title:String,filters:Object,roles:Object,permissions:Object,breadcrumbs:Object,perPage:Number},setup(f){const{_:O,debounce:C,pickBy:S}=G,a=f,e=B({params:{search:a.filters.search,field:a.filters.field,order:a.filters.order,perPage:a.perPage},selectedId:[],multipleSelect:!1,createOpen:!1,editOpen:!1,deleteOpen:!1,deleteBulkOpen:!1,permissionOpen:!1,role:null,dataSet:V().props.app.perpage}),b=o=>{e.params.field=o,e.params.order=e.params.order==="asc"?"desc":"asc"};return I(()=>O.cloneDeep(e.params),C(()=>{let o=S(e.params);D.get(route("role.index"),o,{replace:!0,preserveState:!0,preserveScroll:!0})},150)),(o,t)=>{const u=j;return i(),c(g,null,[r(p(P),{title:a.title},null,8,["title"]),r(T,null,{default:h(()=>[r(F,{title:f.title,breadcrumbs:f.breadcrumbs},null,8,["title","breadcrumbs"]),s("div",X,[s("div",Y,[r(W,{modelValue:e.params.search,"onUpdate:modelValue":t[0]||(t[0]=l=>e.params.search=l),type:"text",class:"block w-3/6 md:w-2/6 lg:w-1/6 rounded-lg",placeholder:o.lang().placeholder.search},null,8,["modelValue","placeholder"]),m(r(q,{class:"rounded-none",onClick:t[1]||(t[1]=l=>e.createOpen=!0)},null,512),[[w,o.can(["create-user"])]])]),s("div",Z,[s("div",ee,[r(M,{show:e.createOpen,onClose:t[2]||(t[2]=l=>e.createOpen=!1),permissions:a.permissions,title:a.title},null,8,["show","permissions","title"]),r(z,{show:e.editOpen,onClose:t[3]||(t[3]=l=>e.editOpen=!1),role:e.role,permissions:a.permissions,title:a.title},null,8,["show","role","permissions","title"]),r(H,{show:e.deleteOpen,onClose:t[4]||(t[4]=l=>e.deleteOpen=!1),role:e.role,title:a.title},null,8,["show","role","title"]),r(J,{show:e.deleteBulkOpen,onClose:t[5]||(t[5]=l=>(e.deleteBulkOpen=!1,e.multipleSelect=!1,e.selectedId=[])),selectedId:e.selectedId,title:a.title},null,8,["show","selectedId","title"]),r(Q,{show:e.permissionOpen,onClose:t[6]||(t[6]=l=>e.permissionOpen=!1),role:e.role,title:a.title},null,8,["show","role","title"])])]),s("div",se,[s("div",te,[s("div",le,[r(E,{modelValue:e.params.perPage,"onUpdate:modelValue":t[7]||(t[7]=l=>e.params.perPage=l),dataSet:e.dataSet},null,8,["modelValue","dataSet"]),m((i(),k($,{onClick:t[8]||(t[8]=l=>e.deleteBulkOpen=!0),class:"px-3 py-1.5"},{default:h(()=>[r(p(x),{class:"w-5 h-5"})]),_:1})),[[w,e.selectedId.length!=0&&o.can(["delete-role"])],[u,o.lang().tooltip.delete_selected]])])]),s("div",oe,[s("table",re,[s("thead",ae,[s("tr",ne,[s("th",ie,[r(K,{checked:e.multipleSelect,"onUpdate:checked":t[9]||(t[9]=l=>e.multipleSelect=l)},null,8,["checked"])]),t[17]||(t[17]=s("th",{class:"px-2 py-4 text-center"},"#",-1)),s("th",{class:"px-2 py-4 cursor-pointer",onClick:t[10]||(t[10]=l=>b("name"))},[s("div",pe,[s("span",null,n(o.lang().label.name),1),r(p(y),{class:"w-4 h-4"})])]),s("th",{class:"px-2 py-4 cursor-pointer",onClick:t[11]||(t[11]=l=>b("email"))},[s("div",de,[t[16]||(t[16]=s("span",null,"Guard",-1)),r(p(y),{class:"w-4 h-4"})])]),s("th",me,n(o.lang().label.permission),1),s("th",{class:"px-2 py-4 cursor-pointer",onClick:t[12]||(t[12]=l=>b("created_at"))},[s("div",ce,[s("span",null,n(o.lang().label.created),1),r(p(y),{class:"w-4 h-4"})])]),s("th",{class:"px-2 py-4 cursor-pointer",onClick:t[13]||(t[13]=l=>b("updated_at"))},[s("div",ue,[s("span",null,n(o.lang().label.updated),1),r(p(y),{class:"w-4 h-4"})])]),t[18]||(t[18]=s("th",{class:"px-2 py-4 sr-only"},"Action",-1))])]),s("tbody",null,[(i(!0),c(g,null,N(f.roles.data,(l,_)=>(i(),c("tr",{key:_,class:"border-t border-slate-200 dark:border-slate-700 hover:bg-slate-200/30 hover:dark:bg-slate-900/20"},[s("td",fe,[m(s("input",{class:"rounded dark:bg-slate-900 border-slate-300 dark:border-slate-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-slate-800 dark:checked:bg-primary dark:checked:border-primary",type:"checkbox",onChange:t[14]||(t[14]=(...d)=>o.select&&o.select(...d)),value:l.id,"onUpdate:modelValue":t[15]||(t[15]=d=>e.selectedId=d)},null,40,be),[[U,e.selectedId]])]),s("td",he,n(++_),1),s("td",we,n(l.name),1),s("td",ye,n(l.guard_name),1),l.permissions.length==a.permissions.length?m((i(),c("td",{key:0,onClick:d=>(e.permissionOpen=!0,e.role=l),class:"whitespace-nowrap py-4 px-2 sm:py-3 cursor-pointer text-blue-600 dark:text-blue-400 font-bold underline"},[v(n(o.lang().label.all_permission),1)],8,ke)),[[u,o.lang().tooltip.detail]]):l.permissions.length!=0?m((i(),c("td",{key:1,onClick:d=>(e.permissionOpen=!0,e.role=l),class:"whitespace-nowrap py-4 px-2 sm:py-3 cursor-pointer text-blue-600 dark:text-blue-400 font-bold underline"},[v(n(l.permissions.length)+" "+n(o.lang().label.permission),1)],8,_e)),[[u,o.lang().tooltip.detail]]):(i(),c("td",ge,n(o.lang().label.no_permission),1)),s("td",ve,n(l.created_at),1),s("td",xe,n(l.updated_at),1),s("td",$e,[s("div",Oe,[s("div",Ce,[m((i(),k(A,{type:"button",onClick:d=>(e.editOpen=!0,e.role=l),class:"px-2 py-1.5 rounded-none"},{default:h(()=>[r(p(R),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[w,o.can(["update-role"])],[u,o.lang().tooltip.edit]]),m((i(),k($,{type:"button",onClick:d=>(e.deleteOpen=!0,e.role=l),class:"px-2 py-1.5 rounded-none"},{default:h(()=>[r(p(x),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[w,o.can(["delete-role"])],[u,o.lang().tooltip.delete]])])])])]))),128))])])]),s("div",Se,[r(L,{links:a.roles,filters:e.params},null,8,["links","filters"])])])])]),_:1})],64)}}};export{ss as default};
